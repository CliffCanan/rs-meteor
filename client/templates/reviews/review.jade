template(name="review")
  div.review(property="review", typeof="Review")
    if showBuildingLink
      div.building
        a(href="{{pathFor route='building' data=building.processedRouteData}}") #{building.title}
    div.author(property="author", typeof="http://schema.org/Person")
      span(property="name") #{displayName}
      if canOperateWithBuilding
        br
        span
          | (
          a(href="mailto:#{email}") #{email}
          | )
    div.posted-date #{formatedCreatedAt}
    div.total-rating(property="reviewRating", typeof="http://schema.org/Rating")
      i.fa.fa-star
      span(property="ratingValue") #{totalRating}
      | /
      span(property="bestRating") 10
    h3(property="name") #{title}
    if isPublished
      p.review-body-summary #{formattedBody}
      p.review-body-full(property="reviewBody") #{body}
    else
      p.review-body(property="reviewBody") #{body}
    .review-breakdown.row
      each reviewItems
        div.review-item-rating.col-lg-6
          +reviewBar
    if showMoreLink
      p.mb0
        a.review-view-more(href="#") View more

    if canOperateWithBuilding
      .admin-actions
        if not isPublished
          a.btn.btn-success.publish-review(href="#")
            i.fa.fa-check
        a.btn.btn-info.edit-review(href="#review-form-modal", data-toggle="modal")
          i.fa.fa-edit
        if isPublished
          a.btn.btn-warning.hide-review(href="#")
            i.fa.fa-eye-slash
        a.btn.btn-danger.remove-review(href="#")
          i.fa.fa-trash