template(name="review")
  div.review(itemprop="review", itemscope, itemtype="http://schema.org/Review")

    if showBuildingLink
      div.building
        a(href="{{pathFor route='building' data=building.processedRouteData}}") #{building.title}

    if canOperateWithBuilding
      .admin-actions
        if not isPublished
          a.btn.btn-success.publish-review(href="#")
            i.fa.fa-check
        a.btn.btn-info.edit-review(href="#review-form-modal", data-toggle="modal")
          i.fa.fa-edit
        if isPublished
          a.btn.btn-warning.hide-review(href="#")
            i.fa.fa-eye-slash
        a.btn.btn-danger.remove-review(href="#")
          i.fa.fa-trash

    h3(itemprop="name") #{title}

    div.total-rating
      i.fa.fa-star 
      span(itemprop="reviewRating", itemscope, itemtype="http://schema.org/Rating")
        meta(itemprop="worstRating" content="0")
        span(itemprop="ratingValue") #{totalRating}
        | /
        span(itemprop="bestRating") 10


    if isPublished
      p.review-body-summary #{formattedBody}
      p.review-body-full(property="reviewBody") #{body}
    else
      p.review-body(property="reviewBody") #{body}
    .review-breakdown.row
      each reviewItems
        div.review-item-rating.col-lg-6
          +reviewBar

    if showMoreLink
      p.text-center
        a.review-view-more(href="#") View More...

    .author-date-box
      div.author(property="author", typeof="http://schema.org/Person")
        span(property="name") #{displayName}
        //span.displayPersona #{displayPersona}

        if canOperateWithBuilding
          small
            | (
            a(href="mailto:#{email}") #{email}
            | )

      div.posted-date #{formatedCreatedAt}